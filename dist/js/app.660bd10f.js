(function(t){function e(e){for(var n,o,s=e[0],l=e[1],u=e[2],d=0,m=[];d<s.length;d++)o=s[d],a[o]&&m.push(a[o][0]),a[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);c&&c(e);while(m.length)m.shift()();return r.push.apply(r,u||[]),i()}function i(){for(var t,e=0;e<r.length;e++){for(var i=r[e],n=!0,s=1;s<i.length;s++){var l=i[s];0!==a[l]&&(n=!1)}n&&(r.splice(e--,1),t=o(o.s=i[0]))}return t}var n={},a={app:0},r=[];function o(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=n,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(i,n,function(e){return t[e]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/Visualify/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var c=l;r.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"112c":function(t,e,i){},"1f37":function(t,e,i){},2446:function(t,e,i){},"382e":function(t,e,i){"use strict";var n=i("2446"),a=i.n(n);a.a},"47f4":function(t,e,i){},"4c5f":function(t,e,i){},"544e":function(t,e,i){"use strict";var n=i("1f37"),a=i.n(n);a.a},"56d7":function(t,e,i){"use strict";i.r(e);i("c5f6"),i("cadf"),i("551c");var n=i("2b0e"),a=i("2f62"),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[t.authToken?i("div",{staticClass:"art-container"},[i("transition",{attrs:{name:"slide"}},[t.consoleIsOpen?i("Console"):t._e()],1),t.songName?[i("transition",{attrs:{name:"fade"}},[t.artCardIsActive?i("AlbumArt"):t._e()],1)]:[i("div",{staticClass:"loading-card"},[i("div",{staticClass:"info-box"},[t.songIsPlaying?i("h1",[t._v("Loading...")]):i("h1",[t._v("No song detected - play something on Spotify!")])])])],i("Visualizer"),i("transition",{attrs:{name:"fade"}},[t.helperIsActive?i("ControlHelper"):t._e()],1)],2):i("SpotifyLogin")],1)},o=[],s=(i("a481"),i("3b2b"),i("7f7f"),i("96cf"),i("3040")),l=i("c93e"),u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"login-page"},[i("div",{staticClass:"centered-login"},[i("h1",[t._v("Visualify")]),i("h2",[t._v("Your live spotify stream, visualized.")]),i("div",{staticClass:"spacer"}),i("img",{staticClass:"spotify-login",attrs:{src:"SpotifyLogin.svg"},on:{click:function(e){t.spotifyLogin()}}})]),t._m(0)])},c=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"credit-footer"},[i("p",[t._v("© 2019 Michael Darr")])])}],d={methods:{spotifyLogin:function(){var t="michaeldarr.github.io/Visualify",e="https",i="https://accounts.spotify.com/authorize?client_id=644406e4a44a430887b1a180181e897f&redirect_uri=",n="%2F&scope=user-read-currently-playing%20user-read-playback-state%20user-modify-playback-state&response_type=token&state=123",a=i+e+"%3A%2F%2F"+t+n;window.location.href=a}}},m=d,h=(i("d61f"),i("2877")),f=Object(h["a"])(m,u,c,!1,null,"cba8baf6",null);f.options.__file="SpotifyLogin.vue";var g,p,b=f.exports,v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"canvasHolder"},[i("canvas",{ref:"visualizerCanvas",staticClass:"visualizerCanvas"},[i("TriangleTesselation",{ref:"triangles"})],1),i("canvas",{ref:"standardCanvas",staticClass:"hiddenCanvas"})])},y=[],w=function(t,e){return Math.floor(e.canvas.width/100*t)},A={data:function(){return{windowHeight:0,windowWidth:0}},computed:Object(l["a"])({},Object(a["b"])(["albumArtLoaded","albumArt","rotation","albumArtWidth","triangleWidth","isLoadingImage","ctx","sctx"]),{finalTriangleHeight:function(){return w(this.triangleWidth/2*Math.sqrt(3),this.ctx)},finalTriangleWidth:function(){return w(this.triangleWidth,this.ctx)},finalAlbumArtWidth:function(){return w(this.albumArtWidth,this.ctx)}}),render:function(){var t=this;if(this.$store.commit("startLoadingImage"),this.ctx&&this.sctx){this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.sctx.canvas.width=4*this.finalTriangleHeight,this.sctx.canvas.height=3*this.finalTriangleHeight;var e=new Image;return e.src=this.albumArt,e.onload=function(){t.$store.commit("loadAlbumArt",e),t.sctx.save(),t.sctx.drawImage(e,0,0,e.width,e.height,0,t.finalTriangleHeight,t.finalTriangleHeight,t.finalTriangleHeight),t.sctx.drawImage(e,0,0,e.width,e.height,2*t.finalTriangleHeight,t.finalTriangleHeight,t.finalTriangleHeight,t.finalTriangleHeight),t.sctx.scale(-1,1),t.sctx.drawImage(e,0,0,e.width,e.height,-t.finalTriangleHeight,t.finalTriangleHeight,-t.finalTriangleHeight,t.finalTriangleHeight),t.sctx.drawImage(e,0,0,e.width,e.height,3*-t.finalTriangleHeight,t.finalTriangleHeight,-t.finalTriangleHeight,t.finalTriangleHeight),t.sctx.scale(1,-1),t.sctx.drawImage(e,0,0,e.width,e.height,-t.finalTriangleHeight,0,-t.finalTriangleHeight,-t.finalTriangleHeight),t.sctx.drawImage(e,0,0,e.width,e.height,3*-t.finalTriangleHeight,0,-t.finalTriangleHeight,-t.finalTriangleHeight),t.sctx.drawImage(e,0,0,e.width,e.height,-t.finalTriangleHeight,2*-t.finalTriangleHeight,-t.finalTriangleHeight,-t.finalTriangleHeight),t.sctx.drawImage(e,0,0,e.width,e.height,3*-t.finalTriangleHeight,2*-t.finalTriangleHeight,-t.finalTriangleHeight,-t.finalTriangleHeight),t.sctx.scale(-1,1),t.sctx.drawImage(e,0,0,e.width,e.height,0,0,t.finalTriangleHeight,-t.finalTriangleHeight),t.sctx.drawImage(e,0,0,e.width,e.height,2*t.finalTriangleHeight,0,t.finalTriangleHeight,-t.finalTriangleHeight),t.sctx.drawImage(e,0,0,e.width,e.height,0,2*-t.finalTriangleHeight,t.finalTriangleHeight,-t.finalTriangleHeight),t.sctx.drawImage(e,0,0,e.width,e.height,2*t.finalTriangleHeight,2*-t.finalTriangleHeight,t.finalTriangleHeight,-t.finalTriangleHeight),t.sctx.restore(),t.$store.commit("finishLoadingImage")},"<p style='display:none'></p>"}},mounted:function(){var t=this;this.$nextTick(function(){window.addEventListener("resize",function(){t.windowWidth=window.innerWidth,t.windowHeight=window.innerHeight})}),this.spin()},watch:{windowHeight:function(t){this.ctx.canvas.height=t},windowWidth:function(t){this.ctx.canvas.width=t}},methods:{spin:function(){if(this.ctx&&this.sctx&&this.albumArtLoaded){for(var t=Math.ceil(this.windowHeight/this.finalTriangleHeight),e=Math.ceil(2*this.windowWidth/this.finalTriangleWidth)+1,i=0;i<t;i++)for(var n=0;n<e;n++)this.ctx.save(),this.drawPath(i,n),this.translateCanvas(i,n),this.drawTriangleGrid(i,n),this.ctx.restore();this.$store.commit("rotateTriangles"),this.$store.commit("pulseAlbumArt"),window.requestAnimationFrame(this.spin)}else window.requestAnimationFrame(this.spin)},drawPath:function(t,e){var i=this.trianglePoints(t,e);this.ctx.beginPath(),this.ctx.moveTo(i.one.x,i.one.y),this.ctx.lineTo(i.two.x,i.two.y),this.ctx.lineTo(i.three.x,i.three.y),this.ctx.closePath(),this.ctx.clip()},translateCanvas:function(t,e){var i=this.xCoord(e),n=this.yCoord(t,e);this.ctx.translate(i,n);var a=t%2?0:1,r=e%2==a?-1:1,o=60*e+this.rotation;o+=t%2==0?180:0,this.ctx.rotate(o*r*Math.PI/180),this.ctx.translate(-i,-n)},drawTriangleGrid:function(t,e){var i=this.xCoord(e)-1.5*this.finalAlbumArtWidth,n=this.yCoord(t,e)-1.5*this.finalAlbumArtWidth,a=t%2?0:1,r=e%2==a?0:this.sctx.canvas.width/4;this.ctx.drawImage(this.sctx.canvas,r,0,this.sctx.canvas.height,this.sctx.canvas.height,i,n,3*this.finalAlbumArtWidth,3*this.finalAlbumArtWidth)},trianglePoints:function(t,e){var i={one:{},two:{},three:{}},n=this.xCoord(e)-.5*this.finalTriangleWidth;i.one.x=n,i.two.x=n+this.finalTriangleWidth/2,i.three.x=n+this.finalTriangleWidth;var a=this.finalTriangleHeight*t,r=a+this.finalTriangleHeight,o=t%2?0:1;return i.one.y=e%2==o?a:r,i.two.y=e%2==o?r:a,i.three.y=e%2==o?a:r,i},xCoord:function(t){return.5*this.finalTriangleWidth*t},yCoord:function(t,e){var i=this.finalTriangleHeight*(2*t+1)/2,n=t%2?0:1,a=this.finalTriangleHeight/6;return i+=e%2==n?-a:a,i}}},C=A,S=Object(h["a"])(C,g,p,!1,null,null,null);S.options.__file="TriangleTesselation.vue";var x=S.exports,k={components:{TriangleTesselation:x},mounted:function(){this.$store.commit("setContext",this.$refs["visualizerCanvas"].getContext("2d")),this.$store.commit("setStandardContext",this.$refs["standardCanvas"].getContext("2d")),this.$refs["visualizerCanvas"].width=this.$refs["visualizerCanvas"].parentElement.clientWidth,this.$refs["visualizerCanvas"].height=this.$refs["visualizerCanvas"].parentElement.clientHeight,this.$store.commit("loadLocalStorage")}},I=k,T=(i("9d6a"),Object(h["a"])(I,v,y,!1,null,"322b2891",null));T.options.__file="Visualizer.vue";var _=T.exports,R=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"artCard",staticClass:"art-card"},[i("img",{staticClass:"album-art",attrs:{src:t.albumArt}}),i("div",{staticClass:"info-box"},[i("h1",{directives:[{name:"show",rawName:"v-show",value:t.songNameIsShort,expression:"songNameIsShort"}]},[t._v(t._s(t.songName))]),i("h1",{directives:[{name:"show",rawName:"v-show",value:!t.songNameIsShort,expression:"!songNameIsShort"}]},[i("MarqueeText",{key:t.songName,attrs:{repeat:3}},[t._v("\n        "+t._s(t.songName)+"\n      ")])],1),i("h2",{directives:[{name:"show",rawName:"v-show",value:t.artistNameIsShort,expression:"artistNameIsShort"}]},[t._v(t._s(t.artistName))]),i("h2",{directives:[{name:"show",rawName:"v-show",value:!t.artistNameIsShort,expression:"!artistNameIsShort"}]},[i("MarqueeText",{key:t.artistName,attrs:{repeat:3}},[t._v("\n        "+t._s(t.artistName)+"\n      ")])],1),i("div",{staticClass:"offscreen-test-text-length"},[i("h1",[i("span",{ref:"songNameStatic"},[t._v(t._s(t.songName))])]),i("h2",[i("span",{ref:"artistNameStatic"},[t._v(t._s(t.artistName))])])])])])},W=[],N=i("0150"),H=i.n(N),$={computed:Object(l["a"])({},Object(a["b"])(["albumArt","songName","artistName"])),components:{MarqueeText:H.a},data:function(){return{songNameIsShort:!0,artistNameIsShort:!0}},mounted:function(){this.songNameIsShort=this.$refs.songNameStatic.offsetWidth<=this.$refs.artCard.offsetWidth,this.artistNameIsShort=this.$refs.artistNameStatic.offsetWidth<=this.$refs.artCard.offsetWidth},updated:function(){this.songNameIsShort=this.$refs.songNameStatic.offsetWidth<=this.$refs.artCard.offsetWidth,this.artistNameIsShort=this.$refs.artistNameStatic.offsetWidth<=this.$refs.artCard.offsetWidth}},O=$,Z=(i("e198"),Object(h["a"])(O,R,W,!1,null,"1a0c5090",null));Z.options.__file="AlbumArt.vue";var M=Z.exports,F=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"main-console"},[t._m(0),i("div",{staticClass:"console-body"},[i("h2",{staticClass:"console-subheading"},[t._v("CONTROLS")]),i("div",{staticClass:"control-container"},[i("div",{staticClass:"key-icon-description-holder"},t._l(t.controlList,function(e){return i("div",{key:e.label,staticClass:"control-height-helper"},[i("p",{staticClass:"control-helper"},[t._v(t._s(e.label))])])}),0),i("div",{staticClass:"key-icon-holder"},t._l(t.controlList,function(e){return i("div",{key:e.label,staticClass:"icon-height-helper"},[i("p",{staticClass:"control-key",on:{click:function(i){t.simulateKeypress(e.keyCode)}}},[t._v(t._s(e.keyName))])])}),0)]),i("h2",{staticClass:"console-subheading"},[t._v("CUSTOMIZATION")]),i("ConsoleControlModule",{attrs:{controlTitle:"spin rate",sliderGet:t.getSpinRate,sliderSet:t.setSpinRate,sliderOptions:t.spinSliderOptions,resetFunction:t.resetSpin,disableFunction:t.disableSpin}}),i("ConsoleControlModule",{attrs:{controlTitle:"pattern size",sliderGet:t.getTriangleWidth,sliderSet:t.setTriangleWidth,sliderOptions:t.TriangleWidthSliderOptions,resetFunction:t.resetPattern}}),i("ConsoleControlModule",{attrs:{controlTitle:"zoom speed",sliderGet:t.getAlbumArtZoomRate,sliderSet:t.setAlbumArtZoomRate,sliderOptions:t.albumArtZoomRateOptions,resetFunction:t.resetZoomRate,disableFunction:t.disableZoom}}),i("ConsoleControlModule",{attrs:{controlTitle:"zoom window",sliderGet:t.getAlbumArtZoomWindow,sliderSet:t.setAlbumArtZoomWindow,sliderOptions:t.albumArtZoomWindowOptions,resetFunction:t.resetZoomWindow}}),i("button",{staticClass:"btn reset-all-button",attrs:{type:"button"},on:{click:t.resetAll}},[i("span",[t._v("RESET ALL")])])],1)])},L=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"console-header"},[i("h1",{staticClass:"console-heading"},[t._v("Visualify")])])}],P=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("p",{staticClass:"slider-label"},[t._v(t._s(t.controlTitle))]),i("p",{ref:"spin-rate-option-arrow",staticClass:"slider-option-arrow",on:{click:t.toggleSpinRateControls}},[t._v("\n    "+t._s(this.spinRateControlsExpanded?"▼":"▶")+"\n  ")]),i("transition",{on:{enter:t.enter,leave:t.leave}},[t.spinRateControlsExpanded?i("div",[i("div",{staticClass:"customization-detail-holder"},[i("div",{staticClass:"customization-slider-holder"},[i("vue-slider",t._b({model:{value:t.sliderVariableFinal,callback:function(e){t.sliderVariableFinal=e},expression:"sliderVariableFinal"}},"vue-slider",t.sliderOptions,!1))],1),i("div",{staticClass:"customization-button-holder"},[t.disableFunction?i("div",[i("div",[i("p",{staticClass:"modify-slider-button",on:{click:t.resetFunction}},[t._v("reset")])]),i("div",{staticClass:"modify-slider-button-spacer"}),i("div",[i("p",{staticClass:"modify-slider-button",on:{click:t.disableFunction}},[t._v("disable")])])]):i("div",[i("div",{staticClass:"no-disable-spacer"}),i("div",[i("p",{staticClass:"modify-slider-button",on:{click:t.resetFunction}},[t._v("reset")])])])])])]):t._e()])],1)},j=[],z=i("6f79"),q=i.n(z),E=i("589d"),V=i.n(E),K={props:{controlTitle:String,sliderGet:Function,sliderSet:Function,sliderOptions:Object,resetFunction:Function,disableFunction:Function},data:function(){return{spinRateControlsExpanded:!1}},computed:{sliderVariableFinal:{get:function(){return this.sliderGet()},set:function(t){this.sliderSet(t)}}},components:{vueSlider:q.a},methods:{toggleSpinRateControls:function(){this.spinRateControlsExpanded=!this.spinRateControlsExpanded},enter:function(t,e){V()(t,"slideDown",{duration:300},{complete:e})},leave:function(t,e){V()(t,"slideUp",{duration:300},{complete:e})}}},D=K,G=(i("fa52"),Object(h["a"])(D,P,j,!1,null,"04ee6116",null));G.options.__file="ConsoleControlModule.vue";var U=G.exports,J={components:{ConsoleControlModule:U},data:function(){return{controlList:[{label:"previous song",keyName:"←",keyCode:"ArrowLeft"},{label:"next song",keyName:"→",keyCode:"ArrowRight"},{label:"volume up",keyName:"↑",keyCode:"ArrowUp"},{label:"volume down",keyName:"↓",keyCode:"ArrowDown"},{label:"toggle fullscreen",keyName:"F",keyCode:"KeyF"},{label:"show/hide controls",keyName:"C",keyCode:"KeyC"},{label:"show/hide art card",keyName:"A",keyCode:"KeyA"},{label:"mute playback",keyName:"M",keyCode:"KeyM"},{label:"play/pause song",keyName:"space",keyCode:"Space"}],spinSliderOptions:{min:-1,max:1,interval:.001,formatter:function(t){return"".concat(Math.round(50*Math.pow(t,2)*60)*(t<0?-1:1)," rpm")},processStyle:{backgroundColor:"#1db954"},bgStyle:{backgroundColor:"#b3b3b3"},tooltipStyle:{backgroundColor:"#282828",borderColor:"#282828",borderRadius:"2px",color:"#b3b3b3",fontFamily:"Montserrat",fontSize:"0.8rem"}},TriangleWidthSliderOptions:{min:.2,max:1,interval:.01,formatter:function(t){return"".concat(Math.round(50*Math.pow(t,2)),"% of screen")},lazy:!0,disabled:this.$store.state.isLoadingImage,processStyle:{backgroundColor:"#1db954"},bgStyle:{backgroundColor:"#b3b3b3"},tooltipStyle:{backgroundColor:"#282828",borderColor:"#282828",borderRadius:"2px",color:"#b3b3b3",fontFamily:"Montserrat",fontSize:"0.8rem"}},albumArtZoomWindowOptions:{min:.4,max:3,interval:.01,formatter:function(t){return"".concat(Math.round(10*t)/10,"x")},processStyle:{backgroundColor:"#1db954"},bgStyle:{backgroundColor:"#b3b3b3"},tooltipStyle:{backgroundColor:"#282828",borderColor:"#282828",borderRadius:"2px",color:"#b3b3b3",fontFamily:"Montserrat",fontSize:"0.8rem"}},albumArtZoomRateOptions:{min:0,max:1,interval:.01,formatter:function(t){return"".concat(Math.round(60*Math.pow(t,2)),"px / sec")},processStyle:{backgroundColor:"#1db954"},bgStyle:{backgroundColor:"#b3b3b3"},tooltipStyle:{backgroundColor:"#282828",borderColor:"#282828",borderRadius:"2px",color:"#b3b3b3",fontFamily:"Montserrat",fontSize:"0.8rem"}}}},methods:{getSpinRate:function(){var t=this.$store.state.albumArtSpinRate<0?-1:1,e=this.$store.state.albumArtSpinRate*t;return Math.sqrt(e/15)*t},setSpinRate:function(t){var e=t<0?-1:1;this.$store.commit("setAlbumArtSpinRate",15*Math.pow(t,2)*e)},getTriangleWidth:function(){return Math.sqrt(this.$store.state.triangleWidth/50)},setTriangleWidth:function(t){var e=50*Math.pow(t,2);if(e<=1)return 1;this.$store.commit("setTriangleWidth",e)},getAlbumArtZoomWindow:function(){return this.$store.state.albumArtZoomWindow},setAlbumArtZoomWindow:function(t){this.$store.commit("setAlbumArtZoomWindow",t)},getAlbumArtZoomRate:function(){return Math.sqrt(this.$store.state.albumArtZoomRate)},setAlbumArtZoomRate:function(t){this.$store.commit("setAlbumArtZoomRate",Math.pow(t,2))},disableSpin:function(){this.$store.commit("setAlbumArtSpinRate",0),this.$store.commit("resetTriangleRotation")},resetSpin:function(){this.$store.commit("setAlbumArtSpinRate",Number("0.2"))},resetPattern:function(){this.$store.commit("setTriangleWidth",Number("20"))},resetZoomRate:function(){this.$store.commit("setAlbumArtZoomRate",Number("0.05"))},disableZoom:function(){this.$store.commit("setAlbumArtZoomRate",0)},resetZoomWindow:function(){this.$store.commit("setAlbumArtZoomWindow",[Number("0.5"),Number("2")])},resetAll:function(){this.resetSpin(),this.resetPattern(),this.resetZoomRate(),this.resetZoomWindow()},simulateKeypress:function(t){var e=new KeyboardEvent("keyup",{code:t});window.dispatchEvent(e)}}},B=J,Y=(i("c755"),Object(h["a"])(B,F,L,!1,null,"5cdc8e20",null));Y.options.__file="Console.vue";var Q=Y.exports,X=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"helper-body"},[i("p",{staticClass:"helper-text"},[t._v("\n    Press "),i("span",{staticClass:"key",on:{click:t.openConsole}},[t._v("C")]),t._v(" for controls and more options!"),i("span",{staticClass:"close-helper",on:{click:t.closeHelper}},[t._v("✕")])])])},tt=[],et={methods:{openConsole:function(){var t=new KeyboardEvent("keyup",{code:"KeyC"});window.dispatchEvent(t)},closeHelper:function(){this.$store.commit("disableHelper")}}},it=et,nt=(i("544e"),Object(h["a"])(it,X,tt,!1,null,"776b7942",null));nt.options.__file="ControlHelper.vue";var at=nt.exports,rt=i("bc3a"),ot={name:"app",components:{SpotifyLogin:b,Visualizer:_,AlbumArt:M,ControlHelper:at,Console:Q},computed:Object(l["a"])({},Object(a["b"])(["songName","authToken","consoleIsOpen","playbackIsMuted","volumeCache","songIsPlaying","helperIsActive","songIsPaused","artCardIsActive"])),created:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(window.addEventListener("keyup",this.keymonitor),e=st(),window.location.hash="",!e){t.next=11;break}return this.$store.commit("updateToken",{authToken:e}),this.startInterval(Object(s["a"])(regeneratorRuntime.mark(function t(){var e,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.authToken){t.next=14;break}return t.next=3,this.makeSpotifyRequest("get","v1/me/player/currently-playing");case 3:if(e=t.sent,!e.data||!e.data.item||e.data.item.name===this.songName){t.next=13;break}return this.$store.commit("setSongIsPlaying",!0),this.$store.commit({type:"updateSong",albumArt:e.data.item.album.images[0].url,songName:e.data.item.name,artistName:e.data.item.artists[0].name}),t.next=9,this.makeSpotifyRequest("get","v1/audio-analysis/"+e.data.item.id);case 9:i=t.sent,i&&i.data&&this.$store.commit("updateSongbpm",i.data.track.tempo),t.next=14;break;case 13:this.$store.commit("setSongIsPlaying",!1);case 14:case"end":return t.stop()}},t,this)})).bind(this),5),setTimeout(function(){var t="michaeldarr.github.io/Visualify",e="https",i="https://accounts.spotify.com/authorize?client_id=644406e4a44a430887b1a180181e897f&redirect_uri=",n="%2F&scope=user-read-currently-playing%20user-read-playback-state%20user-modify-playback-state&response_type=token&state=123",a=i+e+"%3A%2F%2F"+t+n;window.location.href=a},36e5),t.next=9,this.makeSpotifyRequest("get","v1/me/player");case 9:i=t.sent,this.$store.commit("setSongIsPaused",!i.data.is_playing);case 11:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),methods:{makeSpotifyRequest:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e,i){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",rt({method:e,url:"https://api.spotify.com/"+i,headers:{Authorization:"Bearer "+this.authToken}}));case 1:case"end":return t.stop()}},t,this)}));return function(e,i){return t.apply(this,arguments)}}(),keymonitor:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e){var i,n,a,r,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:t.t0=e.code,t.next="Space"===t.t0?3:"ArrowRight"===t.t0?5:"ArrowLeft"===t.t0?7:"ArrowUp"===t.t0?9:"ArrowDown"===t.t0?16:"KeyC"===t.t0?23:"KeyM"===t.t0?26:"KeyF"===t.t0?38:"KeyA"===t.t0?40:42;break;case 3:return this.songIsPaused?(this.$store.commit("setSongIsPaused",!1),this.makeSpotifyRequest("put","v1/me/player/play")):(this.$store.commit("setSongIsPaused",!0),this.makeSpotifyRequest("put","v1/me/player/pause")),t.abrupt("break",42);case 5:return this.makeSpotifyRequest("post","v1/me/player/next"),t.abrupt("break",42);case 7:return this.makeSpotifyRequest("post","v1/me/player/previous"),t.abrupt("break",42);case 9:return t.next=11,this.makeSpotifyRequest("get","v1/me/player");case 11:return i=t.sent,n=i.data.device.volume_percent+10,n>100&&(n=100),this.makeSpotifyRequest("put","v1/me/player/volume?volume_percent="+n),t.abrupt("break",42);case 16:return t.next=18,this.makeSpotifyRequest("get","v1/me/player");case 18:return a=t.sent,r=a.data.device.volume_percent-10,r<0&&(r=0),this.makeSpotifyRequest("put","v1/me/player/volume?volume_percent="+r),t.abrupt("break",42);case 23:return this.$store.commit("toggleConsole"),this.$store.commit("disableHelper"),t.abrupt("break",42);case 26:if(!this.playbackIsMuted){t.next=31;break}this.$store.commit("toggleMutedState"),this.makeSpotifyRequest("put","v1/me/player/volume?volume_percent="+this.volumeCache),t.next=37;break;case 31:return t.next=33,this.makeSpotifyRequest("get","v1/me/player");case 33:o=t.sent,this.$store.commit("setVolumeCache",o.data.device.volume_percent),this.$store.commit("toggleMutedState"),this.makeSpotifyRequest("put","v1/me/player/volume?volume_percent=0");case 37:return t.abrupt("break",42);case 38:return window.innerHeight>=screen.height-1?document.exitFullscreen():this.$el.requestFullscreen(),t.abrupt("break",42);case 40:return this.$store.commit("toggleArtCardIsActive"),t.abrupt("break",42);case 42:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),startInterval:function(t,e){return t(),setInterval(t,1e3*e)}}};function st(){var t=window.location.href,e=new RegExp("[?#]access_token(=([^&#]*)|&|#|$)"),i=e.exec(t);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}var lt=ot,ut=(i("382e"),Object(h["a"])(lt,r,o,!1,null,"2dc8f696",null));ut.options.__file="App.vue";var ct=ut.exports;n["a"].config.productionTip=!1,n["a"].use(a["a"]);var dt=new a["a"].Store({state:{albumArt:null,songName:null,artistName:null,songbpm:null,authToken:null,rotation:0,albumArtSpinRate:Number("0.2"),albumArtZoomRate:Number("0.05"),albumArtZoomWindow:[Number("0.5"),Number("2")],albumArtZoomIn:!0,albumArtZoomDisable:!1,albumArtWidth:Number("20"),albumArtLoaded:null,triangleWidth:Number("20"),isLoadingImage:!1,ctx:null,sctx:null,consoleIsOpen:!1,volumeCache:0,playbackIsMuted:!1,myStorage:!1,songIsPlaying:!0,helperIsActive:!0,songIsPaused:!1,artCardIsActive:!0},getters:{albumArt:function(t){return t.albumArt},songName:function(t){return t.songName},artistName:function(t){return t.artistName},authToken:function(t){return t.authToken},songbpm:function(t){return t.songbpm},rotation:function(t){return t.rotation},albumArtSpinRate:function(t){return t.albumArtSpinRate},albumArtWidth:function(t){return t.albumArtWidth},albumArtLoaded:function(t){return t.albumArtLoaded},albumArtZoomRate:function(t){return t.albumArtZoomRate},albumArtZoomWindow:function(t){return t.albumArtZoomWindow},albumArtZoomDisable:function(t){return t.albumArtZoomDisable},triangleWidth:function(t){return t.triangleWidth},isLoadingImage:function(t){return t.isLoadingImage},ctx:function(t){return t.ctx},sctx:function(t){return t.sctx},consoleIsOpen:function(t){return t.consoleIsOpen},volumeCache:function(t){return t.volumeCache},playbackIsMuted:function(t){return t.playbackIsMuted},myStorage:function(t){return t.myStorage},songIsPlaying:function(t){return t.songIsPlaying},helperIsActive:function(t){return t.helperIsActive},songIsPaused:function(t){return t.songIsPaused},artCardIsActive:function(t){return t.artCardIsActive}},mutations:{updateSong:function(t,e){t.albumArt=e.albumArt,t.songName=e.songName,t.artistName=e.artistName},updateToken:function(t,e){t.authToken=e.authToken},updateSongbpm:function(t,e){t.songbpm=e.songbpm},setAlbumArtSpinRate:function(t,e){t.myStorage.setItem("albumArtSpinRate",e),t.albumArtSpinRate=e},rotateTriangles:function(t){t.rotation+=t.albumArtSpinRate},resetTriangleRotation:function(t){t.rotation=0},pulseAlbumArt:function(t){0!=t.albumArtZoomRate?(t.albumArtWidth+=t.albumArtZoomIn?-t.albumArtZoomRate:t.albumArtZoomRate,t.albumArtWidth<t.triangleWidth*t.albumArtZoomWindow[0]?t.albumArtZoomIn=!1:t.albumArtWidth>t.triangleWidth*t.albumArtZoomWindow[1]&&(t.albumArtZoomIn=!0)):t.albumArtWidth=t.triangleWidth*t.albumArtZoomWindow[0]},setAlbumArtWidth:function(t,e){t.albumArtWidth=e},loadAlbumArt:function(t,e){t.albumArtLoaded=e},setContext:function(t,e){t.ctx=e},setStandardContext:function(t,e){t.sctx=e},setTriangleWidth:function(t,e){t.myStorage.setItem("triangleWidth",e),t.triangleWidth=e},setAlbumArtZoomRate:function(t,e){t.myStorage.setItem("albumArtZoomRate",e),t.albumArtZoomRate=e},setAlbumArtZoomWindow:function(t,e){t.myStorage.setItem("albumArtZoomWindow",e),t.albumArtZoomWindow=e},setVolumeCache:function(t,e){t.volumeCache=e},setSongIsPlaying:function(t,e){t.songIsPlaying=e},setSongIsPaused:function(t,e){t.songIsPaused=e},toggleArtCardIsActive:function(t){t.artCardIsActive?(t.myStorage.setItem("artCardIsActive",!1),t.artCardIsActive=!1):(t.myStorage.setItem("artCardIsActive",!0),t.artCardIsActive=!0)},hideConsole:function(t){t.consoleIsOpen=!1},showConsole:function(t){t.consoleIsOpen=!0},toggleConsole:function(t){t.consoleIsOpen=!t.consoleIsOpen},toggleMutedState:function(t){t.playbackIsMuted=!t.playbackIsMuted},startLoadingImage:function(t){t.isLoadingImage=!0},finishLoadingImage:function(t){t.isLoadingImage=!1},loadLocalStorage:function(t){t.myStorage=window.localStorage;for(var e=["albumArtSpinRate","triangleWidth","albumArtZoomRate","albumArtZoomWindow","artCardIsActive"],i=0;i<e.length;i++){var n=Number(t.myStorage.getItem(e[i]));n&&(t[e[i]]=n)}var a=t.myStorage.getItem("helperDisabled");a&&(t.helperIsActive=!1)},disableHelper:function(t){t.myStorage.setItem("helperDisabled",!0),t.helperIsActive=!1}}});new n["a"]({render:function(t){return t(ct)},store:dt}).$mount("#app")},9982:function(t,e,i){},"9d6a":function(t,e,i){"use strict";var n=i("9982"),a=i.n(n);a.a},a360:function(t,e,i){},c755:function(t,e,i){"use strict";var n=i("4c5f"),a=i.n(n);a.a},d61f:function(t,e,i){"use strict";var n=i("47f4"),a=i.n(n);a.a},e198:function(t,e,i){"use strict";var n=i("a360"),a=i.n(n);a.a},fa52:function(t,e,i){"use strict";var n=i("112c"),a=i.n(n);a.a}});
//# sourceMappingURL=app.660bd10f.js.map